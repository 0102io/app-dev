import{b1 as z,v as p,b2 as D,R as k,S as I}from"./index--jBmlGKr.js";const L=.06,A={config:{supports_line_thickness:!0,requires_device:!0},onDeactivate(e){const n=e.modes.balancing_ball;n.sequence=[],n.game_state=void 0},render(e){const{state:n}=e,t=n.modes.balancing_ball;t.game_info??={opts:e},t.game_info.opts=e,t.game_state??=M(n,z,t.game_info),t.game_state.next()},sequencer:function*(e,n){const t=e.modes.npe_ball_bounce,i=t.sequence;t.sequence=[],yield i}};function*M(e,n,t){const i=e.modes.npe_ball_bounce,b=t.opts.frame.grid,l=b.bounds;function d(){c=[0,0],s=p.div(l,[2,2]),i.sequence=[];for(let o=0;o<b.max_pts;o++)i.sequence.push(o);e.play||(e.play=!0,n())}const S=Math.min(l[0],l[1]),_=t.opts.imev.ctx,a=L*S;let s=p.div(l,[2,2]),c=[0,0];const h=40;let q=[],y=Date.now();for(;;){yield;let o=Date.now();const r=(o-y)/1e3;y=o;const u=D()?.imu;let f=0,m=0;u!=null&&(m=-u.accel[0]-2.2,f=u.accel[1],u.accel[2]>0&&(f=-f,m=m)),c=[c[0]+f*h*r,c[1]+m*h*r];const w=s,x=k(b,I[e.settings.line_thickness],w),g=new Set(x);if(e.play)for(const v of q)g.delete(v);if(q=x,g.size>0){for(const v of g)i.sequence.push(v);e.play||(e.play=!0,n())}_.fillStyle="red",_.beginPath(),_.arc(...s,a,0,2*Math.PI),_.fill(),s[0]<a&&d(),s[1]<a&&d(),s[0]>l[0]-a&&d(),s[1]>l[1]-a&&d(),s=p.add(s,p.mul(c,[r,r]))}}export{A as default};
